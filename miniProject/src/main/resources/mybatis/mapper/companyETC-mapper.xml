<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.green.miniProject.dao.ICompanyETCDao_PSH">

    <resultMap id="InterestMemberMap" type="com.green.miniProject.domain.InterestMember">
        <id property="imno" column="imno"/>
        <result property="cno" column="cno"/>
        <result property="mid" column="mid"/>
        <association property="member" javaType="com.green.miniProject.domain.Member">
            <result property="mname" column="mname"/>
            <result property="mstate" column="mstate"/>
        </association>
        <association property="resume" javaType="com.green.miniProject.domain.Resume">
            <result property="rtitle" column="rtitle"/>
        </association>
    </resultMap>

    <select id="getAllInterestMembers" resultMap="InterestMemberMap">
        SELECT im.imno, im.cno, im.mid, 
               m.mname, m.mstate, 
               r.rtitle
        FROM interestMember im
        JOIN MEMBER m ON im.MID = m.MID
        JOIN resume r ON im.MID = r.MID
    </select>
    
    <delete id="removeInterest">
        DELETE FROM interestMember WHERE imno = #{imno}
    </delete>
    
    <!-- 관심 구직자 mapper -->
    
    
    <select id="getApplyResumesByCompany" resultType="com.green.miniProject.domain.ApplyResume">
        SELECT *
        FROM applyResume ar
        JOIN employNotice en ON ar.enno = en.enno
        WHERE en.cno = #{cno}
    </select>
    
    
    <select id="getEmployNoticesByCno" resultType="com.green.miniProject.domain.EmployNotice">
        SELECT * FROM employNotice WHERE cno = #{cno}
    </select>
    
</mapper>
